(()=>{"use strict";let e="EN",t="RU",s=e;const n=!!new RegExp("ipad|iphone|android|pocket|palm|windows ce|windowsce|cellphone|opera mobi|ipod|small|sharp|sonyericsson|symbian|opera mini|nokia|htc_|samsung|motorola|smartphone|blackberry|playstation portable|tablet browser|webOS|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk","i").test(navigator.userAgent),l={data:()=>({vueCurrentUsername:"",vueCheckLichess:!1,vueLichessOrgPlayerNames:"",vueCheckChessCom:!1,vueChessComPlayerNames:"",vueAutoRefreshInterval:"",vueCheckDarkTheme:!1,vueArLichessPlayers:[],vueArChessComPlayers:[],vueArLichessPlayersBuf:[],vueArChessComPlayersBuf:[]}),methods:{vueScoreLichess(e){!function(e){!async function(e,t){if(-1===e.indexOf(t))return;Te(true,!0);let s=!1,l="";const a=Math.max.apply(null,e.map((e=>e.length)));for(let o of e)if(o!==t){const e=`${i}${t}/${o}`;try{const o=await fetch(e);if(o.ok){const e=await o.json();if(e&&!e.error){let s="",o=0,r="",i=0;const c=e.users;for(let e in c)e.toUpperCase()===t.toUpperCase()?(s=e,o=c[e]):(r=e,i=c[e]);const u=o-i;let m=(u>0?"+":"")+`${u}`;0!==u&&(m=`<span class="${u>0?"scorePlus":"scoreMinus"}">${m}</span>`);const h=" ",p=h.repeat(a-r.length),d=h.repeat(5-String(o).length),y=h.repeat(5-String(i).length);l+=n?"X":`${s}`,l+=` - ${r} ${p}${d} ${o} : ${i}${y} = ${m}\n`}}else s=!0,ze(`status error: ${o.status} ${o.statusText} - ${e}`)}catch(t){s=!0,ze(`error: ${t} - ${e}`)}}let o;Te(true,!1),Ee()?(l+=s?'\nLichess says: "Too many requests from your ip-address."\nTry again later.':"",o=n?`Score (X is ${t} ):`:"Score between players:"):(l+=s?'\nLichess сообщает: "Слишком много запросов с вашего ip-адреса."\nПовторите запрос немного позже.':"",o=n?`Счет (X это ${t}):`:"Счет между игроками:"),qe(l,o)}(se(!0),e)}(e)},vueGroupAdd(){!function(){let e,t;if(D().length===P){const e=Ee()?"10 groups have already been created.\n\nThis is maximum !":"10 групп уже создано.\n\nЭто максимум !";return void alert(e)}t=Ee()?"Input name of new group:":"Введите имя новой группы:";const s=prompt(t,"");if(null!==s&&""!==s){if(s.length>A)return t=Ee()?"The name must not exceed 30 symbols !":"Длина имени не должна превышать 30 символов !",void alert(t);if(e=s.toUpperCase(),void 0!==q.find((t=>t.name.toUpperCase()===e)))return t=Ee()?`Group "${s}" already exists.\n\nPlease enter an another name !`:`Группа "${s}" уже есть.\n\nПожалуйста, введите другое имя !`,void alert(t);if(s.includes("!"))return t=Ee()?'The name must not include symbol "!".':'Имя не должно содержать символ  "!".',void qe(t);q.push({name:s,lichessPlayerNames:o.vueLichessOrgPlayerNames,chessComPlayerNames:o.vueChessComPlayerNames}),k=s,N=D(),U(document.getElementById("group"),k,k),he(),R(),t=Ee()?`It's created group "${s}"\nwith the current lists of players.\n\nChange player lists !`:`Создана группа "${s}"\nс текущими списками игроков.\n\nВнесите свои изменения в списки созданной группы!`,alert(t),function(e){o.vueLichessOrgPlayerNames=e}(ye()+"\n"),document.querySelector("#elemLichessPlayerNames").focus()}}()},vueGroupDel(){!function(){let e,t=k;const s=N.indexOf(t,0);if(K(s))return e=Ee()?`Group "${t}" cannot be deleted !`:`Группу "${t}" нельзя удалять !`,void alert(e);if(e=Ee()?`Delete group "${t}" ?`:`Удалить группу "${t}" ?`,!confirm(e))return;const n=document.getElementById("group");n.options[s]=null,n.options[0].selected=!0,q=q.filter(((e,t,n)=>t!==s)),N=D(),k=N[0],R(),fe(q[0].lichessPlayerNames),Ce(q[0].chessComPlayerNames),W(),e=Ee()?`Group "${t}" is deleted.\n\nCurrent group is "${k}".`:`Группа "${t}" удалена.\n\nТекущая группа теперь: "${k}".`,alert(e)}()},vueRefresh(){W()},vueOnClickCheckLichess(){Pe(!ke()),Q()},vueOnClickCheckChessCom(){Ne(!Ae()),Z()},vueRefreshLichess(){Q()},vueRefreshChessCom(){Z()},vueOnchangeLichessPlayerNames(){Y()},vueOnchangeChessComPlayerNames(){!function(){let e=ge();e=void 0===e?"":e,Ce(e),_()}()},vueGoTables(){me(".sectionSettingsArea"),ue("main")},vueGoSetMode(){me("main"),ue(".sectionSettingsArea")},vueSortBulletLichess(){V(!0,"bullet")},vueSortBlitzLichess(){V(!0,"blitz")},vueSortRapidLichess(){V(!0,"rapid")},vueSortPuzzleLichess(){V(!0,"puzzle")},vueSortRushLichess(){V(!0,"rush")},vueSortBulletChessCom(){V(!1,"bullet")},vueSortBlitzChessCom(){V(!1,"blitz")},vueSortRapidChessCom(){V(!1,"rapid")},vueSortPuzzleChessCom(){V(!1,"puzzle")},vueSortRushChessCom(){V(!1,"rush")},vueOnchangeAutoRefreshInterval(){!function(){let e=ve();e=void 0===e?"":e,be(e.trim())}()},vueOnClickSetTheme(){Le(!Se()),he(),we()},vueClearSettings(){!function(){let t;t=Ee()?"All settings will be cleared.\n\nAre you sure ?":"Все настройки будут сброшены.\n\nВы уверены ?",confirm(t)&&(localStorage.clear(),be(""),Le(!1),G(),F(k),function(){let e=document.getElementById("group").options;for(;e.length>L;)e[e.length-1]=null}(),E&&(E=!1,de()),W(),pe(),we(),t=Ee()?"All settings are cleared.":"Все настройки сброшены.",alert(t),s=e,document.getElementById("langSelect").value=s,Oe())}()},vueGoMainModeFromSettings(){!function(){let e=ve();if(""!==e){let t=parseInt(e,10);if(isNaN(t)||!(Number.isInteger(t)&&t>=0&&t<=9999))return void alert("Interval must be between 0 and 9999 !");e=t.toString(10)}be(e),localStorage.setItem("AutoRefreshInterval",e),pe(),me(".sectionSettingsArea"),ue("main")}()},vueButtonChangeTables(){de(),function(){E=!E;const e=E?"1":"";localStorage.setItem("isFirstChessCom",e)}()},vueGoMainModeFromUser(){me(".sectionLoginArea"),ue("main")}}},a=Vue.createApp(l);a.component("vue-component-tips",{template:'\n    <fieldset id="tipsEN" class="showBlock">\n    <legend><em><strong>Tips</strong></em></legend>\n    <ul>\n      <li><span class="click">Click</span> on the <span class="dotted">button "↺"</span>\n        to refresh all tables\n      </li>\n      <li><span class="click">Click</span> on the <span class="dotted">"↑↓" button</span> to change the order of tables</li>\n      <li><span class="click">Click</span> on the <span class="dotted">heading "♞ Lichess"</span> to refresh the\n        Lichess table and sort by player list</li>\n      <li><span class="click">Click</span> on the <span class="dotted">heading "♟ Chess.com"</span> to refresh the\n        Chess.com table and sort by player list</li>\n      <li><span class="click">Click</span> on <span class="dotted">any other heading</span> to sort by rating\n      </li>\n      <li>\n        If you <span class="click">hover the mouse over </span><span class="dotted">the player in table</span>,\n        a pop-up window will appear with an <span class="dotted">information about player</span>\n      </li>\n      <li>For Lichess: there are several types of <span class="dotted">player status</span> to the left of his\n        name in table:\n        <ul>\n          <li><span class="statusOnline">&#10004;</span> - online</li>\n          <li><span class="statusPlaying">&#9679;</span> - playing</li>\n          <li><span class="statusStreaming">&#127908;</span> - streaming</li>\n        </ul>\n      </li>\n      <li>For Lichess: <span class="colorGreen">green</span> and <span class="colorRed">red</span> values in the rating table - are a change in the <span class="dotted">rating of the last\n          game day</span> in comparison with the <span class="dotted">rating of the previous game day</span>.\n      </li>\n    </ul>\n    </fieldset>\n\n    <fieldset id="tipsRU" class="hiddenBlock">\n    <legend><em><strong>Подсказки</strong></em></legend>\n    <ul>\n      <li><span class="click">Нажмите</span> на <span class="dotted">кнопку "↺" </span>\n        для обновления всех таблиц</li>\n        <li><span class="click">Нажмите</span> на <span class="dotted">кнопкe "↑↓"</span>, чтобы поменять порядок таблиц</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">заголовок "♞ Lichess" </span>\n        для обновления таблицы Lichess и упорядочивания ее по списку игроков</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">заголовок "♟ Chess.com" </span>\n        для обновления таблицы Chess.com и упорядочивания ее по списку игроков</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">другие заголовки </span>\n        для упорядочивания таблицы по соответствующему рейтингу</li>\n      <li>\n        <span class="click">При наведении</span> курсора мыши над <span class="dotted">именем игрока в таблице</span>:\n        появится подсказка с <span class="dotted">информацией об игроке из его профиля</span>\n      </li>\n      <li>Для Lichess отображаются несколько типов <span class="dotted">статусов игрока</span> слева от его имени в таблице:\n        <ul>\n          <li><span class="statusOnline">&#10004;</span> - онлайн</li>\n          <li><span class="statusPlaying">&#9679;</span> - сейчас играет</li>\n          <li><span class="statusStreaming">&#127908;</span> - сейчас стримит</li>\n        </ul>\n      </li>\n      <li>Для Lichess: <span class="colorGreen">зеленые</span> и <span class="colorRed">красные</span> значения в таблице рейтингов - это изменение <span class="dotted">\n          рейтинга последнего игрового дня</span> в сравнении с <span class="dotted">рейтингом предыдущего игрового дня</span>.\n      </li>\n    </ul>\n    </fieldset>\n'});const o=a.mount("#vue-mount"),r="https://lichess.org/api/user/",i="https://lichess.org/api/crosstable/",c="cors",u=new Map([["RU","Russia"],["US","United States"],["AZ","Azerbaijan"],["PL","Poland"],["FR","France"],["HU","Hungary"],["NL","Netherlands"],["AM","Armenia"],["CN","China"],["IR","Iran"],["NO","Norway"],["BY","Belarus"]]),m="@FIDE@",h="@STATUS-TEXT@",p="@STATUS-SYMBOL@",d=new Map([["player",0],["bullet",1],["blitz",2],["rapid",3],["puzzle",4],["rush",5]]);let y="",f="";const g="bovgit",C="Creator of this page :)",v=new Map([[g,C],["Thibault","Creator of Lichess.org"],["DrNykterstein","World champion\n\nMagnus Carlsen, Norway, FIDE 2882, GM"],["AvalonGamemaster","? Maxime Vachier-Lagrave, France, GM"]]),b=new Map([[g,C],["Erik","Creator of Chess.com"],["MagnusCarlsen","World champion"]]),S=[{name:"mix",lichessPlayerNames:"Thibault Zhigalko_Sergei Benefactorr Chess-Network Crest64 Challenger_Spy ShahMatKanal Shuvalov Pandochka",chessComPlayerNames:"Erik Hikaru VladDobrov ChessQueen ChessNetwork ShahMatKanal"},{name:"FIDE top",lichessPlayerNames:"DrNykterstein Alireza2003 Bombegranate AnishGiri Azerichessss AvalonGamemaster BakukaDaku87 Sergey_Karjakin Colchonero64 Vladimirovich9000",chessComPlayerNames:"MagnusCarlsen Firouzja2003 ChefsHouse FabianoCaruana LachesisQ LevonAronian AnishGiri gmwso Azerichess Grischuk Lordillidan LyonBeast Polish_fighter3000 TRadjabov Sebastian SergeyKarjakin hikaru Colchonero64"}],L=S.length;let k=S[0].name;const P=10,A=30;let N,w,T,I,B,z,$,q=[],E=!1,O="",x="",M="",H="";function R(){q.length>L?me("#msgHintAddGroup"):ue("#msgHintAddGroup");let e=document.querySelector("#elemLichessPlayerNames"),t=document.querySelector("#elemChessComPlayerNames");K(N.indexOf(k,0))?(me("#msgHintEdit"),e.disabled=!0,t.disabled=!0,e.title="",t.title=""):(ue("#msgHintEdit"),e.disabled=!1,t.disabled=!1,e.title=y,t.title=f)}function D(){return q.map((e=>e.name))}function G(){q=[];for(let e=0;e<L;e++)q.push("");!function(){for(let e=0;e<L;e++)q[e]=JSON.parse(JSON.stringify(S[e]));k=q[0].name,N=D(),fe(q[0].lichessPlayerNames),Ce(q[0].chessComPlayerNames)}()}function F(e){const t=document.getElementById("group");for(let s=0;s<N.length;s++)U(t,N[s],e)}function U(e,t,s){const n=document.createElement("option");j(n,t,s),e.appendChild(n)}function j(e,t,s){e.value=t,e.innerHTML=t,e.value===s&&(e.selected=!0)}function _(){const e=q.find((e=>e.name===k));e.lichessPlayerNames=o.vueLichessOrgPlayerNames,e.chessComPlayerNames=o.vueChessComPlayerNames}function K(e){return e>-1&&e<L}function Y(){let e=ye();e=void 0===e?"":e,fe(e),_()}function V(e,t){if(""===t)return;let s,n,l,a,r,i,c,u,m=function(e){const t=e?".TBodyLichess":".TBodyChessCom";return document.querySelector(t)}(e),h=m.rows.length;if(0===h)return;let p=new Array(h);for(s=0;s<h;s++)for(a=m.rows[s].cells,l=a.length,p[s]=new Array(l),n=0;n<l;n++)r=0===n?e?o.vueArLichessPlayers[s].playerName:o.vueArChessComPlayers[s].playerName:a[n].textContent,r=r.trim(),0===n?p[s][n]=r:(i=0,""!==r&&(i=parseInt(r,10),!isNaN(i)&&Number.isInteger(i)||(i=0)),p[s][n]=i);p.sort((function(e,s){let n=d.get(t)+1;return s[n]-e[n]})),J(e),c=".THead"+t+(e?"Lichess":"ChessCom"),r=document.querySelector(c).textContent,u=r.slice(-1),"↑"!==u&&(document.querySelector(c).textContent+="↑"),e?(O=c,M=t):(x=c,H=t);const y=[];let f,g;for(s=0;s<h;s++)for(f=0;f<h;f++)if(g=e?o.vueArLichessPlayers[f].playerName:o.vueArChessComPlayers[f].playerName,p[s][0]===g){y.push(e?o.vueArLichessPlayers[f]:o.vueArChessComPlayers[f]);break}for(s=0;s<h;s++)e?o.vueArLichessPlayers[s]=y[s]:o.vueArChessComPlayers[s]=y[s]}function J(e){let t=e?O:x;if(""!==t){let e=document.querySelector(t).textContent;"↑"===e.slice(-1)&&(document.querySelector(t).textContent=e.slice(0,-1))}}function X(e){J(e),e?(O="",M=""):(x="",H="")}function W(){let e=!0;X(e),te(e),e=!1,X(e),te(e),he()}function Q(){ee(!0)}function Z(){ee(!1)}function ee(e){X(e),te(e),he()}function te(e){const t=e?"#LichessTables":".TableChessComRatings",s=document.querySelector(t);!function(e){return e?ke():Ae()}(e)?"none"!==s.style.display&&(s.style.display="none"):("block"!==s.style.display&&(s.style.display="block"),async function(e){let t=se(e);0!==t.length&&(Te(e,!0),e?(o.vueArLichessPlayersBuf.length=0,await async function(e){await async function(e){const t=e.join(","),s=await fetch("https://lichess.org/api/users",{method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},body:t});if(!s.ok)return void ze(`status error: ${s.status} ${s.statusText} - getProfilesAfterFetchFromLichess`);const n=Be(),l=await s.json();e.forEach(((e,t)=>{const s=e.toUpperCase(),a=l.find((e=>e.username.toUpperCase()===s));if(a){let t,s=re(0,a,"title");s=void 0===s?"":s+" ";let l="",r=v.get(e);r&&(l=r+"\n\n");const i=ie(0,a,"profile","firstName"),c=ie(0,a,"profile","lastName"),m=ie(0,a,"profile","location"),p=ie(0,a,"profile","fideRating"),d=ie(0,a,"profile","bio"),y=ie(0,a,"profile","links");let f="";if(t=ie(0,a,"profile","country"),t){f=u.get(t)||f}let g="";t=re(0,a,"createdAt"),t&&(g=new Date(t).getFullYear());let C="";t=re(0,a,"seenAt");let b="lastOnline";t&&(C=Ie(t),new Date(t)<n&&(b="lastOnlineBeforeToday"));const S=(i?i+" ":"")+(c||"")+(m?(i||c?", ":"")+m:"")+(f?(i||c||m?", ":"")+f:"")+(p?", FIDE "+p:"")+(s&&!r?", "+s:"");l+=S+(S?"\n":"")+(g?"reg. "+g:"")+(C?"\nlast online "+C:"")+"\n"+h+(d?"\n"+$e(d,'"',"'"):"")+(y?"\n"+y:"");let L='<a href="https://lichess.org/@/'+e+'" target="_blank" title="'+l+'">@STATUS-SYMBOL@<span class="playerTitle">'+s+" </span><strong>"+e+"</strong></a>"+(C?'<br><span class="'+b+'">'+C+"</span>":"");const k=ce(0,a,"perfs","bullet","rating"),P=ce(0,a,"perfs","blitz","rating"),A=ce(0,a,"perfs","rapid","rating"),N=ce(0,a,"perfs","puzzle","rating"),w=ce(0,a,"perfs","storm","score");o.vueArLichessPlayersBuf.push({playerHTML:L,playerName:e,bullet:k,blitz:P,rapid:A,puzzle:N,rush:w})}else ze(`${e} - lichess, response.json error`),o.vueArLichessPlayersBuf.push({playerHTML:"<em>"+e+"</em>",playerName:e,bullet:"",blitz:"",rapid:"",puzzle:"",rush:""})}))}(e),await async function(e){(await async function(e){let t=[];const s=e.join(",");let n=fetch(`https://lichess.org/api/users/status?ids=${s}`,{mode:c}).then((e=>200!=e.status?null:e.json()),(e=>null));return t.push(n),await Promise.all(t)}(e))[0].forEach((t=>{const s=t.name;e.forEach(((e,n)=>{if(s.toUpperCase()===e.toUpperCase()){const e=re(0,t,"patron"),s=re(0,t,"online"),l=re(0,t,"playing"),a=re(0,t,"streaming");let r=e?"Patron. ":"";const i=Ee(),c=i?"Now":"Сейчас",u=i?"playing":"играет",m=i?"streaming":"стримит",d=i?"online":"онлайн";r+=s||a||l?c+" ":"",r+=l?u+", ":"",r+=a?m+", ":"",r+=!s||a||l?"":d+", ",r=r.trim(),","===r[r.length-1]&&(r=r.slice(0,r.length-1)+".");let y=r?r+"\n":"",f=o.vueArLichessPlayersBuf[n].playerHTML.replace(h,y);r="",a&&(r='<span class="statusStreaming">&#127908;</span>'),l&&(r+='<span class="statusPlaying">&#9679;</span>'),!s||a||l||(r='<span class="statusOnline">&#10004;</span>'),f=f.replace(p,r),o.vueArLichessPlayersBuf[n].playerHTML=f}}))}))}(e),await async function(e){(await async function(e){let t=[];for(let s of e){let e=fetch(`${r}${s}/activity`,{mode:c}).then((e=>200!=e.status?null:e.json()),(e=>null));t.push(e)}return await Promise.all(t)}(e)).forEach(((e,t)=>{if(e&&0!==e.length)for(let s of["bullet","blitz","rapid","puzzle"]){const l="bullet"===s||"blitz"===s||"rapid"===s,a=l?"games":"puzzles",r=l?s:"score",i="rp",c=e.find((e=>!!(e[a]&&e[a][r]&&e[a][r][i])));if(c){const e=c[a][r][i].after,l=c[a][r][i].before;if(e&&l){const a=e-l;if(0!==a){const e=n?"mobileRatingPlus":"ratingPlus";let l=(a>0?"+":"")+`${a}`;l=a>0?"<sup>"+l+"</sup>":"<sub>"+l+"</sub>",l=`<span class="${a>0?e:"ratingMinus"}">${l}</span>`;const r=o.vueArLichessPlayersBuf[t];r[s]=`${r[s]}${l}`,o.vueArLichessPlayersBuf[t]=r}}}}}))}(e),function(e){e.forEach(((e,t)=>{let s=o.vueArLichessPlayersBuf[t].playerHTML.replace(h,"");s=s.replace(p,""),o.vueArLichessPlayersBuf[t].playerHTML=s}))}(e)}(t)):(o.vueArChessComPlayersBuf.length=0,o.vueArChessComPlayersBuf=o.vueArChessComPlayersBuf.map(((e,t)=>{o.vueArChessComPlayersBuf[t]={playerHTML:"",playerName:"",bullet:"",blitz:"",rapid:"",puzzle:"",rush:""}})),await async function(e){let t=!0;await ne(e,t),t=!1,await ne(e,t)}(t)),function(e,t){if(0===t.length)return;const s=e?o.vueArLichessPlayersBuf.length:o.vueArChessComPlayersBuf.length,n=[];for(let l=0;l<t.length;l++){const a=t[l];if(""!==a)for(let t=0;t<s;t++)if(a===(e?o.vueArLichessPlayersBuf[t].playerName:o.vueArChessComPlayersBuf[t].playerName)){n.push(e?o.vueArLichessPlayersBuf[t]:o.vueArChessComPlayersBuf[t]);break}}e?o.vueArLichessPlayers=[...n]:o.vueArChessComPlayers=[...n]}(e,t),R(),Te(e,!1))}(e))}function se(e){let t=function(e){return e?ye():ge()}(e);t=$e(t,"\n"," ");let s=t.split(" ");return s=s.filter((e=>""!==e)),s}async function ne(e,t){let s=[...e];const n=s.length;if(0===n)return;const l=t?"profile":"statistics";let a=250;for(let o=0;o<7;o++){let r=[...s];r=r.map((e=>!1)),o>0&&(a+=30,ze(`step ${o+1} / 7, chess.com ${l}, ${s.length} el. from ${n}, delay ${a}`),await new Promise(((e,t)=>setTimeout(e,a))));let i=!0;const c=t?"":"/stats";if((await le(!1,s,c)).forEach(((n,a)=>{const o=s[a];let c=!1;t?c=ae(n,o,e):null!==n&&(oe(n,e.indexOf(o),o),c=!0),c?r[a]=!0:(i=!1,ze(`not read ${l}: ${o}, chess.com`))})),i)break;s=s.filter(((e,t)=>!r[t]))}}async function le(e,t,s=""){let n=[];for(let l of t)if(""!==l){let t=fetch(`${e?r:"https://api.chess.com/pub/player/"}${l}${s}`,{mode:c}).then((e=>200!=e.status?null:e.json()),(e=>null));n.push(t)}return await Promise.all(n)}function ae(e,t,s){let n=!1,l="",a="",r="",i="",c="",h="";const p=Be();let d=b.get(t);if(d&&(h=d+"\n\n"),l=re(0,e,"url"),""===l||null==l)r="<em>"+t+"</em>";else{d=re(0,e,"title"),a=void 0===d?"":d+" ";let s="";if(d=re(0,e,"country"),d){const e=d.slice(-2),t=u.get(e);t&&(s=t)}const o=re(0,e,"name");let y=re(0,e,"location");d=re(0,e,"joined"),d&&(i=new Date(1e3*d).getFullYear()),d=re(0,e,"last_online");let f="lastOnline";d&&(c=Ie(1e3*d),new Date(1e3*d)<p&&(f="lastOnlineBeforeToday")),h+=(o||"")+(y?", "+y:"")+(s?", "+s:""),h+=m+(a?", "+a:""),h+=(h&&h!==m?"\n":"")+"reg. "+i+"\nlast online "+c,r='<a href="'+l+'" target="_blank" title="'+h+'"><span class="playerTitle">'+a+" </span><strong>"+t+"</strong></a>"+(c?'<br><span class="'+f+'">'+c+"</span>":""),n=!0}return s.forEach(((e,s)=>{e===t&&(o.vueArChessComPlayersBuf[s]={playerHTML:r,playerName:t,bullet:"",blitz:"",rapid:"",puzzle:"",rush:""})})),n}function oe(e,t,s){const n=re(0,e,"fide"),l=n?`, FIDE ${n}`:"",a=o.vueArChessComPlayersBuf[t].playerHTML.replace(m,l),r=ce(0,e,"chess_bullet","last","rating"),i=ce(0,e,"chess_blitz","last","rating"),c=ce(0,e,"chess_rapid","last","rating"),u=ce(0,e,"tactics","highest","rating"),h=ce(0,e,"puzzle_rush","best","score");o.vueArChessComPlayersBuf[t]={playerHTML:a,playerName:s,bullet:r,blitz:i,rapid:c,puzzle:u,rush:h}}function re(e,t,s){let n="";try{n=t[s]}catch(e){}return n}function ie(e,t,s,n){let l="";try{l=t[s][n]}catch(e){}return l}function ce(e,t,s,n,l){let a="";try{a=t[s][n][l]}catch(e){}return a}function ue(e){document.querySelector(e).style.display="block"}function me(e){document.querySelector(e).style.display="none"}function he(){let e,t,s;localStorage.setItem("groupObjs",JSON.stringify(q)),localStorage.setItem("currentGroupName",k),e=ye(),s=localStorage.getItem("LichessOrgPlayerNames"),s=null===s?"":s,t=e.trim()!==s.trim(),localStorage.setItem("LichessOrgPlayerNames",e),e=ge(),s=localStorage.getItem("ChessComPlayerNames"),s=null===s?"":s,t=t||e.trim()!==s.trim(),localStorage.setItem("ChessComPlayerNames",e),e=ke()?"1":"0",t=t||e!==localStorage.getItem("LichessChecked"),localStorage.setItem("LichessChecked",e),e=Ae()?"1":"0",t=t||e!==localStorage.getItem("ChessComChecked"),localStorage.setItem("ChessComChecked",e),e=Se()?"1":"0",t=t||e!==localStorage.getItem("DarkThemeChecked"),localStorage.setItem("DarkThemeChecked",e)}function pe(){clearInterval(w);let e=ve();if(""!==e){let t=parseInt(e,10);0!==t&&(w=setInterval(W,60*t*1e3))}else w=void 0}function de(){let e;B.parentNode.insertBefore(B,I),e=I,I=B,B=e,$.parentNode.insertBefore($,z),e=z,z=$,$=e}function ye(){return o.vueLichessOrgPlayerNames.trim()}function fe(e){o.vueLichessOrgPlayerNames=e.trim()}function ge(){return o.vueChessComPlayerNames.trim()}function Ce(e){o.vueChessComPlayerNames=e.trim()}function ve(){return o.vueAutoRefreshInterval.trim()}function be(e){o.vueAutoRefreshInterval=e?e.trim():""}function Se(){return o.vueCheckDarkTheme}function Le(e){o.vueCheckDarkTheme=e}function ke(){return o.vueCheckLichess}function Pe(e){o.vueCheckLichess=e}function Ae(){return o.vueCheckChessCom}function Ne(e){o.vueCheckChessCom=e}function we(){const e=Se(),t="black",s="white";e?(document.body.style.backgroundColor=t,document.body.style.color=s):(document.body.style.backgroundColor=s,document.body.style.color=t);const n=e?"1":"0";localStorage.setItem("DarkThemeChecked",n)}function Te(e,t){let s,n,l,a;e&&ke()&&(l=document.querySelector("#elemLichessPlayerNames"),a=document.querySelector("#buttonLichessRefresh"),s="♞ Enter",n="⌛ Enter"),!e&&Ae()&&(l=document.querySelector("#elemChessComPlayerNames"),a=document.querySelector("#buttonChessComRefresh"),s="♟ Enter",n="⌛ Enter"),l&&(a.value=t?n:s)}function Ie(e){let t=new Date;const s=new Date(t).setHours(0,0,0,0);t-=864e5;const n=new Date(t).setHours(0,0,0,0),l=new Date(e);let a=l.toLocaleString();const o=", "+[l.getHours(),l.getMinutes()].map((e=>e<10?"0"+e:e)).join(":");return l>=s?a=(Ee()?"today":"сегодня")+o:l>=n&&(a=(Ee()?"yesterday":"вчера")+o),a}function Be(){const e=new Date-864e5;return new Date(e).setHours(0,0,0,0)}function ze(e){const t=(new Date).toLocaleString();console.log(`${t} - ${e}`)}function $e(e,t,s){return e.replace(new RegExp(t,"g"),s)}function qe(e="",t=""){const s=$e(t,"\n","<br>");!function(e="",t=""){!function(){let e=document.createElement("div");e.id="cover-div",document.body.style.overflowY="hidden",document.body.append(e)}();let s=document.getElementById("prompt-form"),n=document.getElementById("prompt-form-container");function l(e){document.getElementById("cover-div").remove(),document.body.style.overflowY="",n.style.display="none",document.onkeydown=null}document.getElementById("prompt-message").innerHTML=e,document.getElementById("prompt-head").innerHTML=t,s.cancel.onclick=function(){l()},document.onkeydown=function(e){"Escape"==e.key&&l()};let a=s.elements[s.elements.length-1],o=s.elements[0];a.onkeydown=function(e){if("Tab"==e.key&&!e.shiftKey)return o.focus(),!1},o.onkeydown=function(e){if("Tab"==e.key&&e.shiftKey)return a.focus(),!1},n.style.display="block",s.elements.cancel.focus()}($e(e,"\n","<br>"),s)}function Ee(){return s===e}function Oe(){let n;!function(){const n=document.getElementById("langSelect"),l=n.selectedIndex;s=-1===l||n.options[l].text===e?e:t}(),localStorage.setItem("Lang",s);const l=!(s===t);n=document.querySelector("#buttonTables"),n.value=n.title=l?"Tables":"Таблицы",n=document.querySelector("#buttonSettings"),n.value=l?"Settings":"Настройки",n.title=l?"Settings":"Настройки и подсказки",document.querySelector("#buttonRefreshAllTables").title=l?"Refresh all tables":"Обновить все таблицы",document.querySelector("#buttonChangeTables").title=l?"Change tables order":"Поменять таблицы местами",document.querySelector("#GroupText").textContent=l?"Players group: ":"Группа игроков: ",document.querySelector("#buttonGroupAdd").title=l?"Add group":"Добавить группу",document.querySelector("#buttonGroupDel").title=l?"Delete group":"Удалить группу",document.querySelector("#msgHintAddGroup").textContent=l?'Create your own players group by click "+" .':'Создайте свою группу игроков, нажав "+" .',document.querySelector("#elemCheckLichess").title=l?"Make visible or unvisible Lichess table":"Сделать видимой или невидимой таблицу Lichess",document.querySelector("#buttonLichessRefresh").title=l?"Refresh Lichess table":"Обновить таблицу Lichess",n=document.querySelector("#elemLichessPlayerNames"),y=n.title=n.placeholder=l?"Enter players on Lichess, separated by spaces or newline":"Введите Lichess-игроков через пробел или с новой строки",document.querySelector("#elemCheckChessCom").title=l?"Make visible or unvisible Chess.com table":"Сделать видимой или невидимой таблицу Chess.com",document.querySelector("#buttonChessComRefresh").title=l?"Refresh Chess.com table":"Обновить таблицу Chess.com",n=document.querySelector("#elemChessComPlayerNames"),f=n.title=n.placeholder=l?"Enter players on Chess.com, separated by spaces or newline":"Введите Chess.com-игроков через пробел или с новой строки",document.querySelector("#msgHintEdit").textContent=l?"You can edit player lists ↑":"Вы можете редактировать списки игроков ↑",document.querySelector(".THeadScoreLichess").title=l?"The score among players from this table":"Счет между игроками из этой таблицы",document.querySelector(".THeadbulletLichess").textContent=l?"bullet":"пуля",document.querySelector(".THeadblitzLichess").textContent=l?"blitz":"блиц",document.querySelector(".THeadrapidLichess").textContent=l?"rapid":"рапид",document.querySelector(".THeadpuzzleLichess").textContent=l?"puzzle":"задачи",document.querySelector(".THeadrushLichess").textContent=l?"storm":"штурм",document.querySelector(".THeadbulletChessCom").textContent=l?"bullet":"пуля",document.querySelector(".THeadblitzChessCom").textContent=l?"blitz":"блиц",document.querySelector(".THeadrapidChessCom").textContent=l?"rapid":"рапид",document.querySelector(".THeadpuzzleChessCom").textContent=l?"puzzle":"задачи",document.querySelector(".THeadrushChessCom").textContent=l?"rush":"штурм",document.querySelector("#legendSettings").textContent=l?"Settings":"Настройки",document.querySelector("#AutoRefresh").textContent=l?"AutoRefresh Interval in minutes (0 - no AutoRefresh): ":"Интервал автообновления в минутах (0 - нет автообновления): ",document.querySelector("#DarkThemeText").textContent=l?" Dark theme ":" Темная тема",n=document.querySelector("#buttonClearSettings"),n.value=n.title=l?"Clear all settings, user's groups":"Очистить все настройки, пользовательские группы",document.querySelector("#tipsEN").setAttribute("class",l?"showBlock":"hiddenBlock"),document.querySelector("#tipsRU").setAttribute("class",l?"hiddenBlock":"showBlock"),document.querySelector("#hrefEMail").title=l?"send email to bovgit@gmail.com":"отправить письмо на bovgit@gmail.com",document.querySelector("#hrefVideo").title=l?"Video-demonstration":"Видео-демонстрация"}I=document.querySelector("#InputOrder1"),B=document.querySelector("#InputOrder2"),z=document.querySelector("#LichessTables"),$=document.querySelector("#ChessComTables"),n&&document.querySelector("#bodyStyle").setAttribute("class","mobileStyle"),document.querySelector("#group").onchange=()=>function(){const e=document.getElementById("group");let t=q.find((t=>t.name===e.value));t&&(k=t.name,fe(t.lichessPlayerNames),Ce(t.chessComPlayerNames)),"streamers online"===k&&async function(){try{const e=await fetch("https://lichess.org/streamer/live/",{mode:c});if(e.ok){const t=await e.json();if(t){fe(t.map((e=>e.name)).join(" ")),Y()}}}catch(e){ze(`getStreamersOnlineAfterFetchFromLichess(), error: ${e}`)}}(),R(),W()}(),document.querySelector("#langSelect").onchange=()=>Oe(),document.addEventListener("keydown",(function(e){e.ctrlKey&&"Enter"===e.key&&W()})),G(),function(){let n;n=localStorage.getItem("Lang"),s=n&&""!==n&&n!==e?t:e,document.getElementById("langSelect").value=s,Oe(),n=localStorage.getItem("currentGroupName"),n||(n=k),""!==n&&(k=n),n=localStorage.getItem("groupObjs"),n&&""!==n&&"undefined"!==n?(q=JSON.parse(n),N=D(),n=localStorage.getItem("LichessOrgPlayerNames"),fe(n),n=localStorage.getItem("ChessComPlayerNames"),Ce(n)):(n=localStorage.getItem("LichessOrgPlayerNames"),n||(n=S[0].lichessPlayerNames),""!==n&&fe(n),n=localStorage.getItem("ChessComPlayerNames"),n||(n=S[0].chessComPlayerNames),""!==n&&Ce(n)),n=localStorage.getItem("LichessChecked"),n=null===n?"1":n,Pe("1"===n),n=localStorage.getItem("ChessComChecked"),n=null===n?"1":n,Ne("1"===n),n=localStorage.getItem("isFirstChessCom"),E="1"===n,n=localStorage.getItem("AutoRefreshInterval"),be(n),n=localStorage.getItem("DarkThemeChecked"),Le("1"===n)}(),F(k),function(e){const t=document.getElementById("group"),s=N.indexOf(e,0);var n,l;n=e,l=e,j(t[s],n,l)}(k),E&&de(),pe(),we(),window.addEventListener("orientationchange",(function(){window.orientation}),!1),T=!0,W(),R()})();