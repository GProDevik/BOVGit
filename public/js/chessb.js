(()=>{"use strict";let e="EN",t=e;const s=!!new RegExp("ipad|iphone|android|pocket|palm|windows ce|windowsce|cellphone|opera mobi|ipod|small|sharp|sonyericsson|symbian|opera mini|nokia|htc_|samsung|motorola|smartphone|blackberry|playstation portable|tablet browser|webOS|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk","i").test(navigator.userAgent),n={data:()=>({vueCurrentUsername:"",vueCheckLichess:!1,vueLichessOrgPlayerNames:"",vueCheckChessCom:!1,vueChessComPlayerNames:"",vueAutoRefreshInterval:"",vueCheckDarkTheme:!1,vueArLichessPlayers:[],vueArChessComPlayers:[],vueArLichessPlayersBuf:[],vueArChessComPlayersBuf:[]}),methods:{vueScoreLichess(e){!function(e){!async function(e,t){if(-1===e.indexOf(t))return;Te(true,!0);let n=!1,o="";const l=Math.max.apply(null,e.map((e=>e.length)));for(let a of e)if(a!==t){const e=`${r}${t}/${a}`;try{const a=await fetch(e);if(a.ok){const e=await a.json();if(e&&!e.error){let n="",a=0,r="",i=0;const c=e.users;for(let e in c)e.toUpperCase()===t.toUpperCase()?(n=e,a=c[e]):(r=e,i=c[e]);const u=a-i;let h=(u>0?"+":"")+`${u}`;0!==u&&(h=`<span class="${u>0?"scorePlus":"scoreMinus"}">${h}</span>`);const m=" ",p=m.repeat(l-r.length),d=m.repeat(5-String(a).length),y=m.repeat(5-String(i).length);o+=s?"X":`${n}`,o+=` - ${r} ${p}${d} ${a} : ${i}${y} = ${h}\n`}}else n=!0,Ie(`status error: ${a.status} ${a.statusText} - ${e}`)}catch(t){n=!0,Ie(`error: ${t} - ${e}`)}}let a;Te(true,!1),$e()?(o+=n?'\nLichess says: "Too many requests from your ip-address."\nTry again later.':"",a=s?`Score (X is ${t} ):`:"Score between players:"):(o+=n?'\nLichess сообщает: "Слишком много запросов с вашего ip-адреса."\nПовторите запрос немного позже.':"",a=s?`Счет (X это ${t}):`:"Счет между игроками:"),ze(o,a)}(te(!0),e)}(e)},vueGroupAdd(){!function(){let e,t;if(O().length===L)return void ze($e()?"10 groups have already been created.\n\nThis is maximum !":"10 групп уже создано.\n\nЭто максимум !");t=$e()?"Input name of new group:":"Введите имя новой группы:";const s=prompt(t,"");if(null!==s&&""!==s){if(s.length>P)return t=$e()?"The name must not exceed 30 symbols !":"Длина имени не должна превышать 30 символов !",void ze(t);if(e=s.toUpperCase(),void 0!==z.find((t=>t.name.toUpperCase()===e)))return t=$e()?`Group "${s}" already exists.\n\nPlease enter an another name !`:`Группа "${s}" уже есть.\n\nПожалуйста, введите другое имя !`,void ze(t);z.push({name:s,lichessPlayerNames:l.vueLichessOrgPlayerNames,chessComPlayerNames:l.vueChessComPlayerNames}),k=s,A=O(),F(document.getElementById("group"),k,k),he(),H(),t=$e()?`It's created group "${s}"\nwith the current lists of players.\n\nChange player lists !`:`Создана группа "${s}"\nс текущими списками игроков.\n\nВнесите свои изменения в списки созданной группы!`,ze(t),function(e){l.vueLichessOrgPlayerNames=e}(de()+"\n"),document.querySelector("#elemLichessPlayerNames").focus()}}()},vueGroupDel(){!function(){let e,t=k;const s=A.indexOf(t,0);if(_(s))return e=$e()?`Group "${t}" cannot be deleted !`:`Группу "${t}" нельзя удалять !`,void ze(e);if(e=$e()?`Delete group "${t}" ?`:`Удалить группу "${t}" ?`,!confirm(e))return;const n=document.getElementById("group");n.options[s]=null,n.options[0].selected=!0,z=z.filter(((e,t,n)=>t!==s)),A=O(),k=A[0],H(),ye(z[0].lichessPlayerNames),ge(z[0].chessComPlayerNames),X(),e=$e()?`Group "${t}" is deleted.\n\nCurrent group is "${k}".`:`Группа "${t}" удалена.\n\nТекущая группа теперь: "${k}".`,ze(e)}()},vueRefresh(){X()},vueOnClickCheckLichess(){Le(!ke()),W()},vueOnClickCheckChessCom(){Ae(!Pe()),Q()},vueRefreshLichess(){W()},vueRefreshChessCom(){Q()},vueOnchangeLichessPlayerNames(){K()},vueOnchangeChessComPlayerNames(){!function(){let e=fe();e=void 0===e?"":e,ge(e),j()}()},vueGoTables(){document.querySelector("#buttonTables").setAttribute("class","tabSettings tabActive"),document.querySelector("#buttonSettings").setAttribute("class","tabSettings tabPassive"),ue(".sectionSettingsArea"),ce("main")},vueGoSetMode(){document.querySelector("#buttonSettings").setAttribute("class","tabSettings tabActive"),document.querySelector("#buttonTables").setAttribute("class","tabSettings tabPassive"),ue("main"),ce(".sectionSettingsArea")},vueSortBulletLichess(){Y(!0,"bullet")},vueSortBlitzLichess(){Y(!0,"blitz")},vueSortRapidLichess(){Y(!0,"rapid")},vueSortPuzzleLichess(){Y(!0,"puzzle")},vueSortRushLichess(){Y(!0,"rush")},vueSortBulletChessCom(){Y(!1,"bullet")},vueSortBlitzChessCom(){Y(!1,"blitz")},vueSortRapidChessCom(){Y(!1,"rapid")},vueSortPuzzleChessCom(){Y(!1,"puzzle")},vueSortRushChessCom(){Y(!1,"rush")},vueOnchangeAutoRefreshInterval(){!function(){let e=Ce();e=void 0===e?"":e,be(e.trim())}()},vueOnClickSetTheme(){Se(!ve()),he(),we()},vueClearSettings(){!function(){let s;s=$e()?"All settings will be cleared.\n\nAre you sure ?":"Все настройки будут сброшены.\n\nВы уверены ?",confirm(s)&&(localStorage.clear(),be(""),Se(!1),D(),G(k),function(){let e=document.getElementById("group").options;for(;e.length>S;)e[e.length-1]=null}(),$&&($=!1,pe()),X(),me(),we(),s=$e()?"All settings are cleared.":"Все настройки сброшены.",ze(s),t=e,document.getElementById("langSelect").value=t,Ee())}()},vueGoMainModeFromSettings(){ue(".sectionSettingsArea"),ce("main")},vueButtonChangeTables(){pe(),function(){$=!$;const e=$?"1":"";localStorage.setItem("isFirstChessCom",e)}()},vueGoMainModeFromUser(){ue(".sectionLoginArea"),ce("main")}}},o=Vue.createApp(n);o.component("vue-component-tips",{template:'\n    <fieldset id="tipsEN" class="showBlock">\n    <legend><em><strong>Tips</strong></em></legend>\n    <ul>\n      <li><span class="click">Click</span> on the <span class="dotted">button "↺"</span>\n        to refresh all tables\n      </li>\n      <li><span class="click">Click</span> on the <span class="dotted">"↑↓" button</span> to change the order of tables</li>\n      <li><span class="click">Click</span> on the <span class="dotted">heading "♞ Lichess"</span> to refresh the\n        Lichess table and sort by player list</li>\n      <li><span class="click">Click</span> on the <span class="dotted">heading "♟ Chess.com"</span> to refresh the\n        Chess.com table and sort by player list</li>\n      <li><span class="click">Click</span> on <span class="dotted">any other heading</span> to sort by rating\n      </li>\n      <li>\n        If you <span class="click">hover the mouse over </span><span class="dotted">the player in table</span>,\n        a pop-up window will appear with an <span class="dotted">information about player</span>\n      </li>\n      <li>For Lichess: there are several types of <span class="dotted">player status</span> to the left of his\n        name in table:\n        <ul>\n          <li><span class="statusOnline">&#10004;</span> - online</li>\n          <li><span class="statusPlaying">&#9679;</span> - playing</li>\n          <li><span class="statusStreaming">&#127908;</span> - streaming</li>\n        </ul>\n      </li>\n      <li>For Lichess: <span class="colorGreen">green</span> and <span class="colorRed">red</span> values in the rating table - are a change in the <span class="dotted">rating of the last\n          game day</span> in comparison with the <span class="dotted">rating of the previous game day</span>.\n      </li>\n    </ul>\n    </fieldset>\n\n    <fieldset id="tipsRU" class="hiddenBlock">\n    <legend><em><strong>Подсказки</strong></em></legend>\n    <ul>\n      <li><span class="click">Нажмите</span> на <span class="dotted">кнопку "↺" </span>\n        для обновления всех таблиц</li>\n        <li><span class="click">Нажмите</span> на <span class="dotted">кнопкe "↑↓"</span>, чтобы поменять порядок таблиц</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">заголовок "♞ Lichess" </span>\n        для обновления таблицы Lichess и упорядочивания ее по списку игроков</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">заголовок "♟ Chess.com" </span>\n        для обновления таблицы Chess.com и упорядочивания ее по списку игроков</li>\n      <li><span class="click">Нажмите</span> на <span class="dotted">другие заголовки </span>\n        для упорядочивания таблицы по соответствующему рейтингу</li>\n      <li>\n        <span class="click">При наведении</span> курсора мыши над <span class="dotted">именем игрока в таблице</span>:\n        появится подсказка с <span class="dotted">информацией об игроке из его профиля</span>\n      </li>\n      <li>Для Lichess отображаются несколько типов <span class="dotted">статусов игрока</span> слева от его имени в таблице:\n        <ul>\n          <li><span class="statusOnline">&#10004;</span> - онлайн</li>\n          <li><span class="statusPlaying">&#9679;</span> - сейчас играет</li>\n          <li><span class="statusStreaming">&#127908;</span> - сейчас стримит</li>\n        </ul>\n      </li>\n      <li>Для Lichess: <span class="colorGreen">зеленые</span> и <span class="colorRed">красные</span> значения в таблице рейтингов - это изменение <span class="dotted">\n          рейтинга последнего игрового дня</span> в сравнении с <span class="dotted">рейтингом предыдущего игрового дня</span>.\n      </li>\n    </ul>\n    </fieldset>\n'});const l=o.mount("#vue-mount"),a="https://lichess.org/api/user/",r="https://lichess.org/api/crosstable/",i="cors",c=new Map([["RU","Russia"],["US","United States"],["AZ","Azerbaijan"],["PL","Poland"],["FR","France"],["HU","Hungary"],["NL","Netherlands"],["AM","Armenia"],["CN","China"],["IR","Iran"],["NO","Norway"],["BY","Belarus"]]),u="@FIDE@",h="@STATUS-TEXT@",m="@STATUS-SYMBOL@",p=new Map([["player",0],["bullet",1],["blitz",2],["rapid",3],["puzzle",4],["rush",5]]);let d="",y="";const f="bovgit",g="Creator of this page :)",C=new Map([[f,g],["Thibault","Creator of Lichess.org"],["DrNykterstein","World champion\n\nMagnus Carlsen, Norway, FIDE 2882, GM"],["AvalonGamemaster","? Maxime Vachier-Lagrave, France, GM"]]),b=new Map([[f,g],["Erik","Creator of Chess.com"],["MagnusCarlsen","World champion"]]),v=[{name:"mix",lichessPlayerNames:"Thibault Zhigalko_Sergei Benefactorr Chess-Network Crest64 Challenger_Spy ShahMatKanal Shuvalov Pandochka",chessComPlayerNames:"Erik Hikaru VladDobrov ChessQueen ChessNetwork ShahMatKanal"},{name:"FIDE top",lichessPlayerNames:"DrNykterstein Alireza2003 Bombegranate AnishGiri Azerichessss AvalonGamemaster BakukaDaku87 Sergey_Karjakin Colchonero64 Vladimirovich9000",chessComPlayerNames:"MagnusCarlsen Firouzja2003 ChefsHouse FabianoCaruana LachesisQ LevonAronian AnishGiri gmwso Azerichess Grischuk Lordillidan LyonBeast Polish_fighter3000 TRadjabov Sebastian SergeyKarjakin hikaru Colchonero64"}],S=v.length;let k=v[0].name;const L=10,P=30;let A,w,T,N,B,I,q,z=[],$=!1,E="",x="",M="",R="";function H(){z.length>S?ue("#msgHintAddGroup"):ce("#msgHintAddGroup");let e=document.querySelector("#elemLichessPlayerNames"),t=document.querySelector("#elemChessComPlayerNames");_(A.indexOf(k,0))?(ue("#msgHintEdit"),e.disabled=!0,t.disabled=!0,e.title="",t.title=""):(ce("#msgHintEdit"),e.disabled=!1,t.disabled=!1,e.title=d,t.title=y)}function O(){return z.map((e=>e.name))}function D(){z=[];for(let e=0;e<S;e++)z.push("");!function(){for(let e=0;e<S;e++)z[e]=JSON.parse(JSON.stringify(v[e]));k=z[0].name,A=O(),ye(z[0].lichessPlayerNames),ge(z[0].chessComPlayerNames)}()}function G(e){const t=document.getElementById("group");for(let s=0;s<A.length;s++)F(t,A[s],e)}function F(e,t,s){const n=document.createElement("option");U(n,t,s),e.appendChild(n)}function U(e,t,s){e.value=t,e.innerHTML=t,e.value===s&&(e.selected=!0)}function j(){const e=z.find((e=>e.name===k));e.lichessPlayerNames=l.vueLichessOrgPlayerNames,e.chessComPlayerNames=l.vueChessComPlayerNames}function _(e){return e>-1&&e<S}function K(){let e=de();e=void 0===e?"":e,ye(e),j()}function Y(e,t){if(""===t)return;let s,n,o,a,r,i,c,u,h=function(e){const t=e?".TBodyLichess":".TBodyChessCom";return document.querySelector(t)}(e),m=h.rows.length;if(0===m)return;let d=new Array(m);for(s=0;s<m;s++)for(a=h.rows[s].cells,o=a.length,d[s]=new Array(o),n=0;n<o;n++)r=0===n?e?l.vueArLichessPlayers[s].playerName:l.vueArChessComPlayers[s].playerName:a[n].textContent,r=r.trim(),0===n?d[s][n]=r:(i=0,""!==r&&(i=parseInt(r,10),!isNaN(i)&&Number.isInteger(i)||(i=0)),d[s][n]=i);d.sort((function(e,s){let n=p.get(t)+1;return s[n]-e[n]})),V(e),c=".THead"+t+(e?"Lichess":"ChessCom"),r=document.querySelector(c).textContent,u=r.slice(-1),"↑"!==u&&(document.querySelector(c).textContent+="↑"),e?(E=c,M=t):(x=c,R=t);const y=[];let f,g;for(s=0;s<m;s++)for(f=0;f<m;f++)if(g=e?l.vueArLichessPlayers[f].playerName:l.vueArChessComPlayers[f].playerName,d[s][0]===g){y.push(e?l.vueArLichessPlayers[f]:l.vueArChessComPlayers[f]);break}for(s=0;s<m;s++)e?l.vueArLichessPlayers[s]=y[s]:l.vueArChessComPlayers[s]=y[s]}function V(e){let t=e?E:x;if(""!==t){let e=document.querySelector(t).textContent;"↑"===e.slice(-1)&&(document.querySelector(t).textContent=e.slice(0,-1))}}function J(e){V(e),e?(E="",M=""):(x="",R="")}function X(){let e=!0;J(e),ee(e),e=!1,J(e),ee(e),he()}function W(){Z(!0)}function Q(){Z(!1)}function Z(e){J(e),ee(e),he()}function ee(e){const t=e?"#LichessTables":".TableChessComRatings",n=document.querySelector(t);!function(e){return e?ke():Pe()}(e)?"none"!==n.style.display&&(n.style.display="none"):("block"!==n.style.display&&(n.style.display="block"),async function(e){let t=te(e);0!==t.length?(Te(e,!0),e?(l.vueArLichessPlayersBuf.length=0,await async function(e){await async function(e){const t=e.join(","),s=await fetch("https://lichess.org/api/users",{method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},body:t});if(!s.ok)return void Ie(`status error: ${s.status} ${s.statusText} - getProfilesAfterFetchFromLichess`);const n=Be(),o=await s.json();e.forEach(((e,t)=>{const s=e.toUpperCase(),a=o.find((e=>e.username.toUpperCase()===s));if(a){let t,s=ae(0,a,"title");s=void 0===s?"":s+" ";let o="",r=C.get(e);r&&(o=r+"\n\n");const i=re(0,a,"profile","firstName"),u=re(0,a,"profile","lastName"),m=re(0,a,"profile","location"),p=re(0,a,"profile","fideRating"),d=re(0,a,"profile","bio"),y=re(0,a,"profile","links");let f="";if(t=re(0,a,"profile","country"),t){f=c.get(t)||f}let g="";t=ae(0,a,"createdAt"),t&&(g=new Date(t).getFullYear());let b="";t=ae(0,a,"seenAt");let v="lastOnline";t&&(b=Ne(t),new Date(t)<n&&(v="lastOnlineBeforeToday"));const S=(i?i+" ":"")+(u||"")+(m?(i||u?", ":"")+m:"")+(f?(i||u||m?", ":"")+f:"")+(p?", FIDE "+p:"")+(s&&!r?", "+s:"");o+=S+(S?"\n":"")+(g?"reg. "+g:"")+(b?"\nlast online "+b:"")+"\n"+h+(d?"\n"+qe(d,'"',"'"):"")+(y?"\n"+y:"");let k='<a href="https://lichess.org/@/'+e+'" target="_blank" title="'+o+'">@STATUS-SYMBOL@<span class="playerTitle">'+s+" </span><strong>"+e+"</strong></a>"+(b?'<br><span class="'+v+'">'+b+"</span>":"");const L=ie(0,a,"perfs","bullet","rating"),P=ie(0,a,"perfs","blitz","rating"),A=ie(0,a,"perfs","rapid","rating"),w=ie(0,a,"perfs","puzzle","rating"),T=ie(0,a,"perfs","storm","score");l.vueArLichessPlayersBuf.push({playerHTML:k,playerName:e,bullet:L,blitz:P,rapid:A,puzzle:w,rush:T})}else Ie(`${e} - lichess, response.json error`),l.vueArLichessPlayersBuf.push({playerHTML:"<em>"+e+"</em>",playerName:e,bullet:"",blitz:"",rapid:"",puzzle:"",rush:""})}))}(e),await async function(e){(await async function(e){let t=[];const s=e.join(",");let n=fetch(`https://lichess.org/api/users/status?ids=${s}`,{mode:i}).then((e=>200!=e.status?null:e.json()),(e=>null));return t.push(n),await Promise.all(t)}(e))[0].forEach((t=>{const s=t.name;e.forEach(((e,n)=>{if(s.toUpperCase()===e.toUpperCase()){const e=ae(0,t,"patron"),s=ae(0,t,"online"),o=ae(0,t,"playing"),a=ae(0,t,"streaming");let r=e?"Patron. ":"";const i=$e(),c=i?"Now":"Сейчас",u=i?"playing":"играет",p=i?"streaming":"стримит",d=i?"online":"онлайн";r+=s||a||o?c+" ":"",r+=o?u+", ":"",r+=a?p+", ":"",r+=!s||a||o?"":d+", ",r=r.trim(),","===r[r.length-1]&&(r=r.slice(0,r.length-1)+".");let y=r?r+"\n":"",f=l.vueArLichessPlayersBuf[n].playerHTML.replace(h,y);r="",a&&(r='<span class="statusStreaming">&#127908;</span>'),o&&(r+='<span class="statusPlaying">&#9679;</span>'),!s||a||o||(r='<span class="statusOnline">&#10004;</span>'),f=f.replace(m,r),l.vueArLichessPlayersBuf[n].playerHTML=f}}))}))}(e),await async function(e){(await async function(e){let t=[];for(let s of e){let e=fetch(`${a}${s}/activity`,{mode:i}).then((e=>200!=e.status?null:e.json()),(e=>null));t.push(e)}return await Promise.all(t)}(e)).forEach(((e,t)=>{if(e&&0!==e.length)for(let n of["bullet","blitz","rapid","puzzle"]){const o="bullet"===n||"blitz"===n||"rapid"===n,a=o?"games":"puzzles",r=o?n:"score",i="rp",c=e.find((e=>!!(e[a]&&e[a][r]&&e[a][r][i])));if(c){const e=c[a][r][i].after,o=c[a][r][i].before;if(e&&o){const a=e-o;if(0!==a){const e=s?"mobileRatingPlus":"ratingPlus";let o=(a>0?"+":"")+`${a}`;o=a>0?"<sup>"+o+"</sup>":"<sub>"+o+"</sub>",o=`<span class="${a>0?e:"ratingMinus"}">${o}</span>`;const r=l.vueArLichessPlayersBuf[t];r[n]=`${r[n]}${o}`,l.vueArLichessPlayersBuf[t]=r}}}}}))}(e),function(e){e.forEach(((e,t)=>{let s=l.vueArLichessPlayersBuf[t].playerHTML.replace(h,"");s=s.replace(m,""),l.vueArLichessPlayersBuf[t].playerHTML=s}))}(e)}(t)):(l.vueArChessComPlayersBuf.length=0,l.vueArChessComPlayersBuf=l.vueArChessComPlayersBuf.map(((e,t)=>{l.vueArChessComPlayersBuf[t]={playerHTML:"",playerName:"",bullet:"",blitz:"",rapid:"",puzzle:"",rush:""}})),await async function(e){let t=!0;await se(e,t),t=!1,await se(e,t)}(t)),function(e,t){if(0===t.length)return;const s=e?l.vueArLichessPlayersBuf.length:l.vueArChessComPlayersBuf.length,n=[];for(let o=0;o<t.length;o++){const a=t[o];if(""!==a)for(let t=0;t<s;t++)if(a===(e?l.vueArLichessPlayersBuf[t].playerName:l.vueArChessComPlayersBuf[t].playerName)){n.push(e?l.vueArLichessPlayersBuf[t]:l.vueArChessComPlayersBuf[t]);break}}e?l.vueArLichessPlayers=[...n]:l.vueArChessComPlayers=[...n]}(e,t),H(),Te(e,!1)):e?(l.vueArLichessPlayersBuf.length=0,l.vueArLichessPlayers.length=0):(l.vueArChessComPlayersBuf.length=0,l.vueArChessComPlayers.length=0)}(e))}function te(e){let t=function(e){return e?de():fe()}(e);t=qe(t,"\n"," ");let s=t.split(" ");return s=s.filter((e=>""!==e)),s}async function se(e,t){let s=[...e];const n=s.length;if(0===n)return;const o=t?"profile":"statistics";let l=250;for(let a=0;a<7;a++){let r=[...s];r=r.map((e=>!1)),a>0&&(l+=30,Ie(`step ${a+1} / 7, chess.com ${o}, ${s.length} el. from ${n}, delay ${l}`),await new Promise(((e,t)=>setTimeout(e,l))));let i=!0;const c=t?"":"/stats";if((await ne(!1,s,c)).forEach(((n,l)=>{const a=s[l];let c=!1;t?c=oe(n,a,e):null!==n&&(le(n,e.indexOf(a),a),c=!0),c?r[l]=!0:(i=!1,Ie(`not read ${o}: ${a}, chess.com`))})),i)break;s=s.filter(((e,t)=>!r[t]))}}async function ne(e,t,s=""){let n=[];for(let o of t)if(""!==o){let t=fetch(`${e?a:"https://api.chess.com/pub/player/"}${o}${s}`,{mode:i}).then((e=>200!=e.status?null:e.json()),(e=>null));n.push(t)}return await Promise.all(n)}function oe(e,t,s){let n=!1,o="",a="",r="",i="",h="",m="";const p=Be();let d=b.get(t);if(d&&(m=d+"\n\n"),o=ae(0,e,"url"),""===o||null==o)r="<em>"+t+"</em>";else{d=ae(0,e,"title"),a=void 0===d?"":d+" ";let s="";if(d=ae(0,e,"country"),d){const e=d.slice(-2),t=c.get(e);t&&(s=t)}const l=ae(0,e,"name");let y=ae(0,e,"location");d=ae(0,e,"joined"),d&&(i=new Date(1e3*d).getFullYear()),d=ae(0,e,"last_online");let f="lastOnline";d&&(h=Ne(1e3*d),new Date(1e3*d)<p&&(f="lastOnlineBeforeToday")),m+=(l||"")+(y?", "+y:"")+(s?", "+s:""),m+=u+(a?", "+a:""),m+=(m&&m!==u?"\n":"")+"reg. "+i+"\nlast online "+h,r='<a href="'+o+'" target="_blank" title="'+m+'"><span class="playerTitle">'+a+" </span><strong>"+t+"</strong></a>"+(h?'<br><span class="'+f+'">'+h+"</span>":""),n=!0}return s.forEach(((e,s)=>{e===t&&(l.vueArChessComPlayersBuf[s]={playerHTML:r,playerName:t,bullet:"",blitz:"",rapid:"",puzzle:"",rush:""})})),n}function le(e,t,s){const n=ae(0,e,"fide"),o=n?`, FIDE ${n}`:"",a=l.vueArChessComPlayersBuf[t].playerHTML.replace(u,o),r=ie(0,e,"chess_bullet","last","rating"),i=ie(0,e,"chess_blitz","last","rating"),c=ie(0,e,"chess_rapid","last","rating"),h=ie(0,e,"tactics","highest","rating"),m=ie(0,e,"puzzle_rush","best","score");l.vueArChessComPlayersBuf[t]={playerHTML:a,playerName:s,bullet:r,blitz:i,rapid:c,puzzle:h,rush:m}}function ae(e,t,s){let n="";try{n=t[s]}catch(e){}return n}function re(e,t,s,n){let o="";try{o=t[s][n]}catch(e){}return o}function ie(e,t,s,n,o){let l="";try{l=t[s][n][o]}catch(e){}return l}function ce(e){document.querySelector(e).style.display="block"}function ue(e){document.querySelector(e).style.display="none"}function he(){let e,t;localStorage.setItem("currentGroupName",k);let s=[...z];for(let e=0;e<S;e++)s.shift();localStorage.setItem("groupObjs",JSON.stringify(s)),e=ke()?"1":"0",t=t||e!==localStorage.getItem("LichessChecked"),localStorage.setItem("LichessChecked",e),e=Pe()?"1":"0",t=t||e!==localStorage.getItem("ChessComChecked"),localStorage.setItem("ChessComChecked",e),e=ve()?"1":"0",t=t||e!==localStorage.getItem("DarkThemeChecked"),localStorage.setItem("DarkThemeChecked",e)}function me(){clearInterval(w);let e=Ce();if(""!==e){let t=parseInt(e,10);0!==t&&(w=setInterval(X,60*t*1e3))}else w=void 0}function pe(){let e;B.parentNode.insertBefore(B,N),e=N,N=B,B=e,q.parentNode.insertBefore(q,I),e=I,I=q,q=e}function de(){return l.vueLichessOrgPlayerNames.trim()}function ye(e){l.vueLichessOrgPlayerNames=e.trim()}function fe(){return l.vueChessComPlayerNames.trim()}function ge(e){l.vueChessComPlayerNames=e.trim()}function Ce(){return l.vueAutoRefreshInterval.trim()}function be(e){l.vueAutoRefreshInterval=e?e.trim():""}function ve(){return l.vueCheckDarkTheme}function Se(e){l.vueCheckDarkTheme=e}function ke(){return l.vueCheckLichess}function Le(e){l.vueCheckLichess=e}function Pe(){return l.vueCheckChessCom}function Ae(e){l.vueCheckChessCom=e}function we(){const e=ve(),t="black",s="white";e?(document.body.style.backgroundColor=t,document.body.style.color=s):(document.body.style.backgroundColor=s,document.body.style.color=t);const n=e?"1":"0";localStorage.setItem("DarkThemeChecked",n)}function Te(e,t){let s,n,o,l;e&&ke()&&(o=document.querySelector("#elemLichessPlayerNames"),l=document.querySelector("#buttonLichessRefresh"),s="♞ Enter",n="⌛ Enter"),!e&&Pe()&&(o=document.querySelector("#elemChessComPlayerNames"),l=document.querySelector("#buttonChessComRefresh"),s="♟ Enter",n="⌛ Enter"),o&&(l.value=t?n:s)}function Ne(e){let t=new Date;const s=new Date(t).setHours(0,0,0,0);t-=864e5;const n=new Date(t).setHours(0,0,0,0),o=new Date(e);let l=o.toLocaleString();const a=", "+[o.getHours(),o.getMinutes()].map((e=>e<10?"0"+e:e)).join(":");return o>=s?l=($e()?"today":"сегодня")+a:o>=n&&(l=($e()?"yesterday":"вчера")+a),l}function Be(){const e=new Date-864e5;return new Date(e).setHours(0,0,0,0)}function Ie(e){const t=(new Date).toLocaleString();console.log(`${t} - ${e}`)}function qe(e,t,s){return e.replace(new RegExp(t,"g"),s)}function ze(e="",t=""){const n=qe(t,"\n","<br>");!function(e="",t=""){!function(){let e=document.createElement("div");e.id="cover-div",document.body.style.overflowY="hidden",document.body.append(e)}();let n=document.getElementById("prompt-form"),o=document.getElementById("prompt-form-container");function l(e){document.getElementById("cover-div").remove(),document.body.style.overflowY="",o.style.display="none",document.onkeydown=null}document.getElementById("prompt-message").innerHTML=e,document.getElementById("prompt-head").innerHTML=t,s&&n.setAttribute("class","prompt-formMobileStyle"),n.cancel.onclick=function(){l()},document.onkeydown=function(e){"Escape"==e.key&&l()};let a=n.elements[n.elements.length-1],r=n.elements[0];a.onkeydown=function(e){if("Tab"==e.key&&!e.shiftKey)return r.focus(),!1},r.onkeydown=function(e){if("Tab"==e.key&&e.shiftKey)return a.focus(),!1},o.style.display="block",n.elements.cancel.focus()}(qe(e,"\n","<br>"),n)}function $e(){return t===e}function Ee(){let s;!function(){const s=document.getElementById("langSelect"),n=s.selectedIndex;t=-1===n||s.options[n].text===e?e:"RU"}(),localStorage.setItem("Lang",t);const n=$e();s=document.querySelector("#buttonTables"),s.value=s.title=n?"Tables":"Таблицы",s=document.querySelector("#buttonSettings"),s.value=n?"Settings":"Настройки",s.title=n?"Settings":"Настройки и подсказки",document.querySelector("#buttonRefreshAllTables").title=n?"Refresh all tables":"Обновить все таблицы",document.querySelector("#buttonChangeTables").title=n?"Change tables order":"Поменять таблицы местами",document.querySelector("#GroupText").textContent=n?"Players group: ":"Группа игроков: ",document.querySelector("#buttonGroupAdd").title=n?"Add group":"Добавить группу",document.querySelector("#buttonGroupDel").title=n?"Delete group":"Удалить группу",document.querySelector("#msgHintAddGroup").textContent=n?'Create your own players group by click "+" .':'Создайте свою группу игроков, нажав "+" .',document.querySelector("#elemCheckLichess").title=n?"Make visible or unvisible Lichess table":"Сделать видимой или невидимой таблицу Lichess",document.querySelector("#buttonLichessRefresh").title=n?"Refresh Lichess table":"Обновить таблицу Lichess",s=document.querySelector("#elemLichessPlayerNames"),d=s.title=s.placeholder=n?"Enter players on Lichess, separated by spaces or newline":"Введите Lichess-игроков через пробел или с новой строки",document.querySelector("#elemCheckChessCom").title=n?"Make visible or unvisible Chess.com table":"Сделать видимой или невидимой таблицу Chess.com",document.querySelector("#buttonChessComRefresh").title=n?"Refresh Chess.com table":"Обновить таблицу Chess.com",s=document.querySelector("#elemChessComPlayerNames"),y=s.title=s.placeholder=n?"Enter players on Chess.com, separated by spaces or newline":"Введите Chess.com-игроков через пробел или с новой строки",document.querySelector("#msgHintEdit").textContent=n?"You can edit player lists ↑":"Вы можете редактировать списки игроков ↑",document.querySelector(".THeadScoreLichess").title=n?"The score among players from this table":"Счет между игроками из этой таблицы",document.querySelector(".THeadbulletLichess").textContent=n?"bullet":"пуля",document.querySelector(".THeadblitzLichess").textContent=n?"blitz":"блиц",document.querySelector(".THeadrapidLichess").textContent=n?"rapid":"рапид",document.querySelector(".THeadpuzzleLichess").textContent=n?"puzzle":"задачи",document.querySelector(".THeadrushLichess").textContent=n?"storm":"штурм",document.querySelector(".THeadbulletChessCom").textContent=n?"bullet":"пуля",document.querySelector(".THeadblitzChessCom").textContent=n?"blitz":"блиц",document.querySelector(".THeadrapidChessCom").textContent=n?"rapid":"рапид",document.querySelector(".THeadpuzzleChessCom").textContent=n?"puzzle":"задачи",document.querySelector(".THeadrushChessCom").textContent=n?"rush":"штурм",document.querySelector("#legendSettings").textContent=n?"Settings":"Настройки",document.querySelector("#AutoRefresh").textContent=n?"AutoRefresh Interval in minutes (0 - no AutoRefresh): ":"Интервал автообновления в минутах (0 - нет автообновления): ",document.querySelector("#DarkThemeText").textContent=n?" Dark theme ":" Темная тема",s=document.querySelector("#buttonClearSettings"),s.value=s.title=n?"Clear all settings, user's groups":"Очистить все настройки, пользовательские группы",document.querySelector("#tipsEN").setAttribute("class",n?"showBlock":"hiddenBlock"),document.querySelector("#tipsRU").setAttribute("class",n?"hiddenBlock":"showBlock"),document.querySelector("#hrefEMail").title=n?"send email to bovgit@gmail.com":"отправить письмо на bovgit@gmail.com",document.querySelector("#hrefVideo").title=n?"Video-demonstration":"Видео-демонстрация"}N=document.querySelector("#InputOrder1"),B=document.querySelector("#InputOrder2"),I=document.querySelector("#LichessTables"),q=document.querySelector("#ChessComTables"),s&&document.querySelector("#bodyStyle").setAttribute("class","mobileStyle"),document.querySelector("#group").onchange=()=>function(){const e=document.getElementById("group");let t=z.find((t=>t.name===e.value));t&&(k=t.name,ye(t.lichessPlayerNames),ge(t.chessComPlayerNames)),"streamers online"===k&&async function(){try{const e=await fetch("https://lichess.org/streamer/live/",{mode:i});if(e.ok){const t=await e.json();if(t){ye(t.map((e=>e.name)).join(" ")),K()}}}catch(e){Ie(`getStreamersOnlineAfterFetchFromLichess(), error: ${e}`)}}(),H(),X()}(),document.querySelector("#langSelect").onchange=()=>Ee(),document.querySelector("#elemAutoRefreshInterval").onblur=()=>function(){let e=Ce();if(""!==e){let t=parseInt(e,10);if(isNaN(t)||!(Number.isInteger(t)&&t>=0&&t<=9999))return ze($e()?"Interval must be between 0 and 9999 !":"Интервал должен быть между 0 и 9999 !"),void be("");e=t.toString(10)}be(e),localStorage.setItem("AutoRefreshInterval",e),me()}(),document.addEventListener("keydown",(function(e){e.ctrlKey&&"Enter"===e.key&&X()})),D(),function(){let s;if(s=localStorage.getItem("Lang"),t=s&&""!==s&&s!==e?"RU":e,document.getElementById("langSelect").value=t,Ee(),s=localStorage.getItem("currentGroupName"),s||(s=k),""!==s&&(k=s),s=localStorage.getItem("groupObjs"),s&&""!==s&&"undefined"!==s){z=JSON.parse(s),z.unshift(...v),A=O();const e=A.indexOf(k,0);e<0?D():(ye(z[e].lichessPlayerNames),ge(z[e].chessComPlayerNames))}else D();s=localStorage.getItem("LichessChecked"),s=null===s?"1":s,Le("1"===s),s=localStorage.getItem("ChessComChecked"),s=null===s?"1":s,Ae("1"===s),s=localStorage.getItem("isFirstChessCom"),$="1"===s,s=localStorage.getItem("AutoRefreshInterval"),be(s),s=localStorage.getItem("DarkThemeChecked"),Se("1"===s)}(),G(k),function(e){const t=document.getElementById("group"),s=A.indexOf(e,0);var n,o;n=e,o=e,U(t[s],n,o)}(k),$&&pe(),me(),we(),window.addEventListener("orientationchange",(function(){window.orientation}),!1),T=!0,X(),H()})();